# Исправление проблемы с кнопкой "Войти через Google"

## Проблема:
При нажатии на кнопку "Войти через Google" ничего не происходит - форма остается на месте.

## Что исправлено:

1. **Изменен обработчик `handleGoogleSignIn`:**
   - Теперь использует `redirect: false` и обрабатывает редирект вручную
   - Добавлено логирование для диагностики
   - Если `signIn` не возвращает URL, используется прямой редирект

2. **Добавлена диагностика:**
   - В консоли браузера будут видны логи при нажатии на кнопку
   - Это поможет понять, что именно не работает

## Диагностика:

### Шаг 1: Проверьте консоль браузера

1. Откройте страницу `/login`
2. Откройте консоль разработчика (F12 → Console)
3. Нажмите на кнопку "Войти через Google"
4. Проверьте, что выводится в консоли:
   - Должно появиться: "Начинаем вход через Google..."
   - Затем: "Результат signIn: ..."

### Шаг 2: Проверьте переменные окружения

**Локально:**
```powershell
# Проверьте, что переменные не пустые
Get-Content .env.local | Select-String -Pattern "GOOGLE_CLIENT"
```

Должны быть:
- `GOOGLE_CLIENT_ID="ваш-id.apps.googleusercontent.com"` (не пустое!)
- `GOOGLE_CLIENT_SECRET="ваш-secret"` (не пустое!)

**На Vercel:**
- Vercel Dashboard → Settings → Environment Variables
- Убедитесь, что `GOOGLE_CLIENT_ID` и `GOOGLE_CLIENT_SECRET` не пустые

### Шаг 3: Проверьте API провайдеров

Откройте в браузере:
- Локально: `http://localhost:3000/api/auth/providers`
- На Vercel: `https://life-script-swart.vercel.app/api/auth/providers`

Должен вернуться JSON с Google провайдером. Если Google нет в списке - проблема с переменными окружения.

### Шаг 4: Проверьте Network tab

1. Откройте DevTools (F12) → Network
2. Нажмите на кнопку "Войти через Google"
3. Проверьте, есть ли запрос к `/api/auth/signin/google`
4. Если запроса нет - проблема в обработчике кнопки
5. Если запрос есть, но возвращает ошибку - проверьте логи

## Возможные причины:

1. **GOOGLE_CLIENT_ID или GOOGLE_CLIENT_SECRET пустые**
   - Решение: Проверьте переменные окружения

2. **Провайдер не зарегистрирован**
   - Решение: Проверьте `/api/auth/providers`

3. **Проблема с редиректом**
   - Решение: Теперь используется ручной редирект через `window.location.href`

4. **Ошибка в конфигурации NextAuth**
   - Решение: Проверьте логи сервера

## Что делать дальше:

1. **Проверьте консоль браузера** после нажатия на кнопку
2. **Проверьте переменные окружения** - они не должны быть пустыми
3. **Проверьте `/api/auth/providers`** - должен быть Google провайдер
4. **Проверьте Network tab** - должен быть запрос к `/api/auth/signin/google`

Если проблема сохраняется, пришлите:
- Что выводится в консоли браузера
- Что возвращает `/api/auth/providers`
- Есть ли запросы в Network tab


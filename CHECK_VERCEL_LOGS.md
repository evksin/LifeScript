# Проверка логов Vercel для диагностики ошибки 500

## Проблема:
Ошибка 500 на `/api/auth/session` и `/api/auth/signin/google` на Vercel.

## Решение:

### Шаг 1: Проверьте логи Vercel

1. Откройте [Vercel Dashboard](https://vercel.com/dashboard)
2. Выберите ваш проект **life-script**
3. Перейдите в **Deployments** → выберите последний деплой
4. Откройте вкладку **"Logs"** (не "Build Logs", а именно "Logs" для runtime)
5. Ищите сообщения, начинающиеся с `[NextAuth]`:
   - `[NextAuth] Ошибка инициализации:`
   - `[NextAuth] Сообщение об ошибке:`
   - `[NextAuth] Стек ошибки:`

### Шаг 2: Проверьте переменные окружения

1. Vercel Dashboard → ваш проект → **Settings** → **Environment Variables**
2. Убедитесь, что установлены **ВСЕ** переменные для **Production**:
   - `DATABASE_URL`
   - `GOOGLE_CLIENT_ID`
   - `GOOGLE_CLIENT_SECRET`
   - `AUTH_SECRET` (минимум 32 символа)
   - `AUTH_URL` (например, `https://life-script-swart.vercel.app`)

### Шаг 3: Проверьте значения переменных

Убедитесь, что:
- ✅ Нет лишних пробелов в начале или конце значений
- ✅ Нет лишних кавычек (Vercel добавляет их автоматически)
- ✅ `AUTH_URL` использует `https://`, а не `http://`
- ✅ `AUTH_SECRET` достаточно длинный (минимум 32 символа)

### Шаг 4: Пересоберите проект

После проверки/добавления переменных:

1. Vercel Dashboard → ваш проект → **Deployments**
2. Найдите последний деплой
3. Нажмите **"..."** (три точки) → **"Redeploy"**
4. Выберите **"Use existing Build Cache"** = **No**
5. Нажмите **"Redeploy"**

### Шаг 5: Проверьте логи после пересборки

После пересборки снова проверьте логи:
- Если видите `[NextAuth] Ошибка инициализации:` - это укажет на конкретную проблему
- Если ошибок нет, но 500 сохраняется - проверьте логи runtime

## Типичные ошибки в логах:

1. **"GOOGLE_CLIENT_ID не установлен"** → Добавьте переменную на Vercel
2. **"GOOGLE_CLIENT_SECRET не установлен"** → Добавьте переменную на Vercel
3. **"AUTH_SECRET не установлен"** → Добавьте переменную на Vercel
4. **Ошибки подключения к базе данных** → Проверьте `DATABASE_URL`

## Если переменные установлены, но ошибка сохраняется:

1. Убедитесь, что переменные добавлены для **Production** (не только для Preview/Development)
2. Проверьте, что после добавления переменных вы пересобрали проект
3. Проверьте логи runtime (не build logs) на наличие других ошибок
